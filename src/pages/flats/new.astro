---
import Layout from "../../layouts/Layout.astro";
import FlatForm from "../../components/FlatForm";

export const prerender = false;

// TODO: Add authentication check when auth is implemented
// const supabase = Astro.locals.supabase;
// const { data: { session } } = await supabase.auth.getSession();
// if (!session) {
//   return Astro.redirect("/login?returnTo=/flats/new");
// }
---

<Layout title="Add New Flat - Flats Manager">
  <main class="min-h-[calc(100vh-4rem)]">
    <div class="container mx-auto px-4 py-8">
      <!-- Breadcrumb Navigation -->
      <nav class="mb-6 text-sm text-muted-foreground" aria-label="Breadcrumb">
        <ol class="flex items-center space-x-2">
          <li>
            <a href="/dashboard" class="hover:text-foreground transition-colors">
              Dashboard
            </a>
          </li>
          <li aria-hidden="true">/</li>
          <li>
            <a href="/flats" class="hover:text-foreground transition-colors">
              Flats
            </a>
          </li>
          <li aria-hidden="true">/</li>
          <li aria-current="page" class="text-foreground font-medium">
            New Flat
          </li>
        </ol>
      </nav>

      <!-- Page Header -->
      <div class="mb-8">
        <h1 class="text-3xl font-bold mb-2">Add New Flat</h1>
        <p class="text-muted-foreground">
          Create a new apartment to manage payments and track expenses.
        </p>
      </div>

      <!-- Flat Form -->
      <FlatForm client:load mode="create" />
    </div>
  </main>
</Layout>

